<style>
.max-w-sm{max-width:400px !important;} 
body {
    font-family: "Open Sans" !important; 
	
}
html {
    font-size: 14px; /* Default font size */
}
.rounded-full {
   
    padding: .5rem 2.5rem;
    font-size: 14px!important; 
    letter-spacing: 1.4px;
    text-transform: uppercase;
	    
    
}
button{
 color: #fff;
}
.text-sm {
    font-size: 14px;
    
}

</style>
<div class="flex justify-center">
        <div class="max-w-sm mx-6">
            <div class="mx-16 mt-12">
				<a href="<?php echo $this->url("login",array('action' => 'index'))?>">
					<img alt="Company Logo" id="logo" class="" src="<?php echo $this->basePath(); ?>/public/img/backstage-logo.png">
				</a>
            </div>
			<div id="api" data-name="SelfAsserted" class="mt-10">
    <div class="buttons flex mt-10 justify-center">
    </div>
    <div class="intro text-center text-gray-700">Check your inbox!</div><div class="mt-4 h-28 text-sm">
                    <div class="text-gray-700">A one-time password verification code has been sent to the following email address :</div>
                    <div class="text-gray-700 text-center"><b><?php echo $this->Email;?></b></div><br>
                    <div class="text-gray-700">This code will expire after 5 minutes.</div>
                </div>
    <form id="attributeVerification" action="JavaScript:void(0);">
      <div id="passwordEntryMismatch" class="error pageLevel mt-4 h-6 text-sm text-red-700" style="display: none;" aria-hidden="true">The password entry fields do not match. Please enter the same password in both fields and try again.</div>
      <div id="requiredFieldMissing" class="error pageLevel mt-4 h-6 text-sm text-red-700" style="display: none;" aria-hidden="true">A required field is missing. Please fill out all required fields and try again.</div>
      <div id="fieldIncorrect" class="error pageLevel mt-4 h-6 text-sm text-red-700" style="display: none;" aria-hidden="true">One or more fields are filled out incorrectly. Please check your entries and try again.</div>
      <div id="claimVerificationServerError" class="error pageLevel mt-4 h-6 text-sm text-red-700" style="display: none;" aria-hidden="true"></div>
      <div id="attributeList" class="attr">
        <ul class="mt-8">
            <li class="VerificationControl"><div class="attrEntry"><label id="emailOtpVerificationControl_label" for="emailOtpVerificationControl"></label><div class="error itemLevel" role="alert"></div><div class="verificationControlContent" id="emailOtpVerificationControl"><div class="verificationInfoText text-sm text-blue-500 mt-4 hidden"><div id="emailOtpVerificationControl_info_message" aria-hidden="true" role="alert" aria-label="Check your inbox!" style="display: none;">Check your inbox!</div></div><div class="verificationSuccessText text-sm text-green-500 mt-4 hidden"><div id="emailOtpVerificationControl_success_message" aria-hidden="false" role="alert" aria-label="
                &amp;lt;div class=&amp;quot;mt-4 h-28 text-sm&amp;quot;&amp;gt;
                    &amp;lt;div class=&amp;quot;text-gray-700&amp;quot;&amp;gt;A one-time password verification code has been sent to the following email address :&amp;lt;/div&amp;gt;
                    &amp;lt;div class=&amp;quot;text-gray-700 text-center&amp;quot;&amp;gt;&amp;lt;b&amp;gt;${obfuscatedEmail}&amp;lt;/b&amp;gt;&amp;lt;/div&amp;gt;
                    &amp;lt;div class=&amp;quot;text-gray-700&amp;quot;&amp;gt;This code will expire after ${otpCodeExpiration}.&amp;lt;/div&amp;gt;
                &amp;lt;/div&amp;gt;
            " style="display: inline;">
                &lt;div class="mt-4 h-28 text-sm"&gt;
                    &lt;div class="text-gray-700"&gt;A one-time password verification code has been sent to the following email address :&lt;/div&gt;
                    &lt;div class="text-gray-700 text-center"&gt;&lt;b&gt;${obfuscatedEmail}&lt;/b&gt;&lt;/div&gt;
                    &lt;div class="text-gray-700"&gt;This code will expire after ${otpCodeExpiration}.&lt;/div&gt;
                &lt;/div&gt;
            </div></div><div class="verificationErrorText error hidden"><div id="emailOtpVerificationControl_error_message" aria-hidden="true" role="alert" aria-label="" style="display: none;"></div></div><ul class="mt-8"><li class="Readonly Email" aria-hidden="false" style="display: inline;"><div class="attrEntry" style="display: none;"><label id="obfuscatedEmail_label" for="obfuscatedEmail">Obfuscated Email Address</label><div class="error itemLevel" role="alert" aria-hidden="true" aria-label=""></div><input id="obfuscatedEmail" class="textInput" type="text" placeholder="Obfuscated Email Address" aria-label="Obfuscated Email Address" value="i**o@primedigitalarena.in" aria-required="true" readonly="readonly" autofocus="autofocus"><a class="helpLink tiny" href="javascript:void(0)" data-help="" style="display: none;"></a></div></li><li class="TextBox VerificationCode" aria-hidden="false" style="display: inline;"><div class="attrEntry relative mb-6"><label id="emailOtpVerification_label" for="emailOtpVerification" class="cursor-text absolute left-11 top-2 text-xs text-gray-dark hidden" style="pointer-events: none;">Verification code</label><div class="error itemLevel hidden" role="alert" aria-hidden="true" aria-label=""></div><div class="verification-otp-container"><div id="emailOtpVerificationWrapper" class="flex items-center w-full"><svg xmlns="http://www.w3.org/2000/svg" class="mr-2" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="#C4C4C4" d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"></path></svg><input id="emailOtpVerification" class="textInput border-b-2 w-full px-4 cursor-text text-sm text-gray-dark border-gray-border pt-4 pb-4" type="text" placeholder="Verification code" aria-label="Verification code" aria-required="true" autocomplete="off"></div><button class="sendNewCode -enabled" type="button" aria-label="Re-send verification code" aria-hidden="true" style="display: none;" id="emailOtpVerificationControl_but_send_new_code_cloned" aria-disabled="false">Re-send verification code</button></div><div id="errorInput" class="w-full"><div class="hidden text-xs text-red-700"></div></div><a class="helpLink tiny hidden" href="javascript:void(0)" data-help="#Enter your verification code" style="display: none;"></a></div></li><li class="Readonly Surname" aria-hidden="false" style="display: inline;"><div class="attrEntry" style="display: none;"><label id="otpCodeExpirationInSeconds_label" for="otpCodeExpirationInSeconds">OTP Code Expiration Time in Seconds</label><div class="error itemLevel" role="alert" aria-hidden="true" aria-label=""></div><input id="otpCodeExpirationInSeconds" class="textInput" type="text" placeholder="OTP Code Expiration Time in Seconds" aria-label="OTP Code Expiration Time in Seconds" value="300" aria-required="true" readonly="readonly"><a class="helpLink tiny" href="javascript:void(0)" data-help="" style="display: none;"></a></div></li></ul><div class="working" style="display: none;" aria-hidden="true"></div><div class="buttons flex mt-10 justify-between"><button class="sendCode" id="emailOtpVerificationControl_but_send_code" type="button" aria-hidden="true" disabled="" style="display: none;"></button><button class="verifyCode" id="emailOtpVerificationControl_but_verify_code" type="button" aria-label="Verify" aria-hidden="false" aria-disabled="true" disabled="" style="display: inline;margin-left:27px;">Verify</button><button class="sendNewCode" id="emailOtpVerificationControl_but_send_new_code" type="button" aria-label="Re-send verification code" aria-hidden="false" disabled=""> Re-send (<span id="countdown">60</span><span style="text-transform: lowercase;">s</span>)</button><button class="changeClaims" id="emailOtpVerificationControl_but_change_claims" type="button" aria-label="undefined Verification code" aria-hidden="true" disabled="" style="display: none;"></button></div></div><a class="helpLink tiny" href="javascript:void(0)" style="display: none;"></a></div></li>
        </ul>
      </div>
      <div class="buttons flex mt-10 justify-center">
        <button id="continue" type="submit" form="attributeVerification" aria-disabled="true" aria-label="" disabled="" style="display: none;"></button><button id="cancel" aria-label="" formnovalidate="" disabled="" style="display: none;"></button>
      </div>

      <div class="verifying-modal hidden" style="display: none;">
        <div id="verifying_blurb"></div>
      </div>
    </form>
    
  </div>
           </div>
    </div>
	
	<script>
	document.addEventListener('DOMContentLoaded', function () {
		const resendButton = document.getElementById('emailOtpVerificationControl_but_send_new_code');
		const countdownSpan = document.getElementById('countdown');
		let countdown = 60;

		const timer = setInterval(() => {
			countdown--;
			countdownSpan.textContent = countdown;

			if (countdown <= 0) {
				clearInterval(timer);
				resendButton.disabled = false;
				resendButton.innerHTML = 'Re-send';
				$('.sendNewCode').addClass('-enabled');
			}
		}, 1000);
	});
	 $(document).ready(function () {
		 
			const regexLetters = new RegExp(/^.{8,}$/);
            const regexLower = new RegExp(/^(?=.*[a-z]).{1,}$/);
            const regexCapital = new RegExp(/^(?=.*[A-Z]).{1,}$/);
            const regexNumber = new RegExp(/^(?=.*\d).{1,}$/);
            const regexGlobal = new RegExp(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/);
		
			// Events
			$('input[type="text"],input[type="emailOtpVerification"]').focus(function() {
				$(this).closest('.attrEntry').find('label').removeClass("text-gray-dark text-red-700 hidden").addClass("text-blue-500");
				$(this).attr("placeholder", "");
				$(this).removeClass("pt-4 pb-4 border-gray-border border-red-700").addClass("pt-6 pb-2 border-blue-500");
			});
			$('input[type="text"],input[type="emailOtpVerification"]').focusout(function() {
				$(this).closest('.attrEntry').find('label').removeClass("text-blue-500").addClass("text-gray-dark");
				$(this).removeClass("border-blue-500").addClass("border-gray-border");
				if($(this).val() == '')
				{
					$(this).closest('.attrEntry').find('label').addClass("text-gray-dark text-red-700 hidden").removeClass("text-blue-500");
					$(this).attr("placeholder", $(this).closest('.attrEntry').find('label').text());
					$(this).addClass("pt-4 pb-4 border-gray-border border-red-700").removeClass("pt-6 pb-2 border-blue-500");
					$('#continue').removeClass('-enabled');
					$('#continue').attr('disabled',true);
				}
			});
			/*$('input[type="password"]').keyup(function(){
				if($(this).val() != '')
				{
					$('#continue').addClass('-enabled');
					$('#continue').removeAttr('disabled');
					
				}
				else
				{
					$('#continue').removeClass('-enabled');
					$('#continue').attr('disabled',true);
				}
				
				
			
			});*/
			
			$('input[id="emailOtpVerification"]').keyup(function(){
				
				if($('#emailOtpVerification').val() != '')
				{
					$('#emailOtpVerificationControl_but_verify_code').addClass('-enabled');
					$('#emailOtpVerificationControl_but_verify_code').removeAttr('disabled');
				}
				else
				{
					$('#emailOtpVerificationControl_but_verify_code').removeClass('-enabled');
					$('#emailOtpVerificationControl_but_verify_code').attr('disabled',true);
				}
				
				
				
				
			});
			
			$('.sendNewCode').click(function(){
				
				var objFormData =
				{
					client : "<?php echo $_GET['token'];?>"
				};
				var objMyPost = AJAX_Post("<?php echo $this->url('login', array('action'=>'resendotp'));?>", objFormData);
				if (objMyPost.ERR_NO === 0) {
					if (objMyPost.DATA.DBStatus === 'OK') {
						
						mySmallAlert('Save Record', 'Resend successfully', 1);
						$('.sendNewCode').prop('disabled',true);
						$('.sendNewCode').removeClass('-enabled');
					}
				}
				else {
					mySmallAlert('Error...!', 'There was an error', 0);
				}
			});
			
			$('#emailOtpVerificationControl_but_verify_code').click(function(){
				
				var objFormData =
				{
					otp : $('#emailOtpVerification').val(),
					client : "<?php echo $_GET['token'];?>"
				};
				var objMyPost = AJAX_Post("<?php echo $this->url('login', array('action'=>'checkotp'));?>", objFormData);
				if (objMyPost.ERR_NO === 0) {
					if (objMyPost.DATA.DBStatus === 'OK') {
						
						mySmallAlert('Save Record', 'Verified successfully', 1);
						setTimeout(function(){
							window.location.href='<?php echo $this->url('dashboard',array("action" => "index"))?>';
						},1500)
						 
					}
					else
					{
						mySmallAlert('Save Record', 'Invalid OTP', 0);
						return;
					}
				}
				else {
					mySmallAlert('Error...!', 'There was an error', 0);
				}
			});
			
			
	});	
	</script>