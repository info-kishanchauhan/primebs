<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
body {
  background: #f5f7fa;
  font-family: 'Inter', sans-serif;
  margin: 0;
  padding: 0;
}

.release-page {
  max-width: 1240px;
  margin: 40px auto;
  padding: 30px;
  background: #fff;
  border-radius: 16px;
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.05);
}

.alert-success {
  background: #e8f8ee;
  color: #1d865c;
  font-size: 15px;
  padding: 16px 24px;
  border-left: 6px solid #2ecc71;
  border-radius: 8px;
  margin-bottom: 30px;
  font-weight: 600;
  display: flex;
  align-items: center;
  font-family: Rubik, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, Noto Sans, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;
}
.alert-success i {
  margin-right: 10px;
}

.hero {
  display: flex;
  gap: 30px;
  flex-wrap: wrap;
}
.hero img {
  width: 260px;
  height: 260px;
  border-radius: 12px;
  object-fit: cover;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
}
.hero-content {
  flex: 1;
}
.hero-content h1 {
  font-size: 32px;
  font-weight: 800;
  margin-bottom: 10px;
}
.status-badge {
  background: #eaf0ff;
  color: #0066ff;
  padding: 6px 16px;
  font-size: 13px;
  border-radius: 20px;
  font-weight: 600;
  display: inline-block;
  margin-bottom: 15px;
  
}

.meta-grid {
  display: grid;
  grid-template-columns: 160px 1fr;
  row-gap: 12px;
  font-size: 15px;
}
.meta-label {
  font-weight: 600;
  color: #6b6b6b;
}
.meta-value {
  font-weight: 500;
  color: #2c3e50;
}

.card {
  background: #f9fbfd;
  padding: 26px 30px;
  border-radius: 14px;
  margin-top: 40px;
  box-shadow: 0 6px 16px rgba(0,0,0,0.03);
}
.card h2 {
  font-size: 18px;
  font-weight: 700;
  margin-bottom: 20px;
  text-align: center; /* âœ… Center the heading */
}
.link-buttons {
  display: flex;
  flex-wrap: wrap;
  gap: 14px;
  margin-top: 10px;
  justify-content: center; /* ðŸ”¥ Center horizontally */
  text-align: center;
}
.link-buttons a {
  padding: 10px 18px;
  border-radius: 8px;
  color: white;
  font-weight: 600;
  font-size: 14px;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  text-decoration: none;
  transition: 0.2s;
}
.link-buttons a:hover {
  opacity: 0.9;
}
.spotify { background: #1DB954; }
.apple { background: #000; }
.youtube { background: #FF0000; }
.deezer { background: #6C2AB8; }
.amazon { background: #FF9900; }
.soundcloud { background: #ff5500; }

.note-box {
  background: #fefefe;
  border: 1px solid #ddd;
  padding: 22px;
  border-radius: 12px;
  margin-top: 50px;
  font-size: 14.5px;
  color: #333;
}
.note-box strong {
  color: #2c3e50;
}
.note-box code {
  background: #f0f0f0;
  padding: 2px 6px;
  border-radius: 4px;
  font-family: monospace;
}

.back-btn {
  margin-top: 40px;
}
.btn-primary {
  background: linear-gradient(to right, #7d2491, #3493ef);
  color: white;
  padding: 12px 28px;
  border: none;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: 0.3s ease;
  display: inline-flex;
  align-items: center; /* âœ… centers vertically */
  justify-content: center; /* âœ… centers horizontally */
  height: 44px; /* âœ… consistent height */
  line-height: 1; /* âœ… fix misalignment in some browsers */
}
.btn-primary:hover {
  background: linear-gradient(90deg, #0056b3, #003c88);
  box-shadow: 0 0 0 2px #0056b3 inset, 0 3px 12px rgba(0, 91, 187, 0.3);
}

 
.skeleton-box {
  position: relative;
  background-color: #eeeeee;
  overflow: hidden;
}

.skeleton-box::after {
  content: "";
  position: absolute;
  top: 0;
  left: -100%;
  height: 100%;
  width: 100%;
  background: linear-gradient(
    90deg,
    rgba(255, 255, 255, 0) 0%,
    rgba(255, 255, 255, 0.6) 50%,
    rgba(255, 255, 255, 0) 100%
  );
  animation: shimmer 1.2s infinite;
}

@keyframes shimmer {
  100% {
    left: 100%;
  }
}

.hero-skeleton {
  display: flex;
  gap: 30px;
  flex-wrap: wrap;
  margin-bottom: 30px;
}

.skel-img {
  width: 260px;
  height: 260px;
  border-radius: 12px;
}

.skel-lines {
  flex: 1;
  display: grid;
  gap: 14px;
  margin-top: 5px;
}

.skel-line {
  height: 25px;
  border-radius: 6px;
}
.skel-line.short { width: 30%; }
.skel-line.medium { width: 40%; }
.skel-line.full { width: 50%; }
  
  .image-modal {
  display: none;
  position: fixed;
  z-index: 9999;
  top: 0; left: 0;
  width: 100vw; height: 100vh;
  background: rgba(0, 0, 0, 0.92);
  align-items: center;
  justify-content: center;
  animation: fadeIn 0.3s ease forwards;
}

.image-modal img {
  max-width: 90vw;
  max-height: 90vh;
  border-radius: 14px;
  box-shadow: 0 0 20px rgba(255, 255, 255, 0.2);
  animation: zoomIn 0.4s ease;
  cursor: zoom-out;
}

.image-modal .close-btn {
  position: absolute;
  top: 20px;
  right: 30px;
  color: white;
  font-size: 30px;
  font-weight: bold;
  cursor: pointer;
  z-index: 10001;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}

@keyframes zoomIn {
  from { transform: scale(0.7); opacity: 0; }
  to   { transform: scale(1); opacity: 1; }
}

</style>
<!-- ====== INSIGHT PROMO CARD (drop-in) ====== -->
<style>
.plaB-insight {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 20px;
  padding: 18px 20px;
  border-radius: 16px;
  background: linear-gradient(135deg, #f6f8ff 0%, #f0f7ff 45%, #f7f9fb 100%);
  border: 1px solid #e8edf7;
  box-shadow: 0 6px 22px rgba(16, 24, 40, 0.06);
  margin: 40px auto;      /* ðŸŸ£ added for better spacing */
  max-width: 1245px;      /* optional â€” keeps it centered like Top Charts box */
}

.plaB-insight-left { display:flex; align-items:center; gap:16px; min-width:0; }
.plaB-insight-icon {
  width:56px; height:56px; border-radius:14px;
  background: radial-gradient(120% 120% at 20% 10%, #7c3aed 0%, #6d28d9 25%, #2563eb 100%);
  display:grid; place-items:center; box-shadow:0 10px 26px rgba(37,99,235,.25);
  flex:0 0 56px;
}
.plaB-insight-icon i { color:#fff; font-size:22px; }
.plaB-insight-text { min-width:0; }
.plaB-insight-title {
  font:700 16px/1.2 'Inter',sans-serif; color:#0f172a; letter-spacing:.2px;
  display:flex; align-items:center; gap:8px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.plaB-insight-desc {
  font:500 13px/1.5 'Inter',sans-serif; color:#475569; margin-top:4px;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis; max-width:60vw;
}
.plaB-insight-actions { display:flex; align-items:center; gap:10px; flex-wrap:wrap; }

.btn-promo {
  background: linear-gradient(90deg, #7d2491, #3493ef);
  color:#fff; padding:8px 12px; font:700 13px/1 'Inter',sans-serif;
  border:0; border-radius:8px; display:inline-flex; align-items:center; gap:8px;
  box-shadow:0 6px 18px rgba(52,147,239,.18); cursor:pointer;
  transition:transform .08s ease, opacity .2s ease;
}
.btn-promo:hover{ transform:translateY(-1px); opacity:.95; }
.btn-promo i{ font-size:14px; }
.btn-promo:disabled{ opacity:.6; cursor:not-allowed; }

.btn-ghost {
  background:#fff; color:#334155; border:1px solid #e2e8f0;
  padding:8px 10px; border-radius:8px; font:600 12.5px/1 'Inter',sans-serif;
  text-decoration:none; display:inline-flex; align-items:center; gap:6px;
}
.btn-ghost:hover{ background:#f8fafc; }

@media (max-width: 768px){
  .plaB-insight{ flex-direction:column; align-items:flex-start; }
  .plaB-insight-desc{ max-width:100%; white-space:normal; }
  .plaB-insight-actions{ width:100%; }
}
</style>

<?php
/* ==== Decide which ID to use for promo ==== 
   Priority:
   1) Query ?edit=ID (if you opened Charts from a specific release)
   2) $this->latest (controller provided)
   3) First row of $this->rows (tracks table)
*/
$promoId = null;

if (!empty($_GET['edit'])) {
  $promoId = preg_replace('/[^0-9]/', '', (string)$_GET['edit']);
}

if (!$promoId && !empty($this->latest) && is_array($this->latest)) {
  $promoId = $this->latest['edit_id']
          ?? $this->latest['id']
          ?? $this->latest['release_id']
          ?? null;
}

if (!$promoId && !empty($this->rows) && is_array($this->rows) && isset($this->rows[0])) {
  $first = $this->rows[0];
  $promoId = $first['edit_id']
          ?? $first['release_id']
          ?? $first['id']
          ?? null;
}

/* Build poster URL via Zend route if available, else fallback */
$posterUrl = null;
if ($promoId) {
  try {
    $posterUrl = method_exists($this, 'url')
      ? $this->url('analytics', ['action'=>'poster','id'=>$promoId])
      : "/analytics/poster/".rawurlencode((string)$promoId);
  } catch (\Throwable $e) {
    $posterUrl = "/analytics/poster/".rawurlencode((string)$promoId);
  }
}

/* Small dynamic texts */
$promoTitle = "Latest releases â€” Letâ€™s promote it on social media!";
$promoDesc  = "Turn your newest track into ready-to-share posters & stories in seconds.";
?>

<!-- ===== Insight card (place this ABOVE the table/list) ===== -->
<div class="plaB-insight">
  <div class="plaB-insight-left">
    <div class="plaB-insight-icon">
      <i class="fa fa-bullhorn"></i>
    </div>
    <div class="plaB-insight-text">
      <div class="plaB-insight-title"><?php echo $this->escapeHtml($promoTitle); ?></div>
      <div class="plaB-insight-desc"><?php echo $this->escapeHtml($promoDesc); ?></div>
    </div>
  </div>

  <div class="plaB-insight-actions">
    <button class="btn-promo" onclick="plaB_goPromo()" <?php echo $posterUrl ? '' : 'disabled';?>>
      <i class="fa fa-wand-magic-sparkles"></i> Create Promo
    </button>
    <a class="btn-ghost" href="https://www.primebackstage.in/faq/category/25" target="_blank">
      <i class="fa fa-circle-question"></i> How it works
    </a>
  </div>
</div>

<script>
function plaB_goPromo(){
  <?php if ($posterUrl): ?>
    window.location.href = "<?php echo htmlspecialchars($posterUrl, ENT_QUOTES, 'UTF-8');?>";
  <?php else: ?>
    alert("Promo link unavailable (missing release ID).");
  <?php endif; ?>
}
</script>

<?php
  $title = trim($this->Info['title']);
  $artist = trim($this->Info['releaseArtist']);
  $searchYoutube = urlencode($title . ' ' . $artist);
  $searchSpotify = str_replace(' ', '%20', $title . ' ' . $artist);

  $youtubeLink = "https://www.youtube.com/results?search_query=" . $searchYoutube;
  $spotifyLink = "https://open.spotify.com/search/" . $searchSpotify;
  $appleLink = "https://music.apple.com/us/search?term=" . $searchSpotify;
  $deezerLink = "https://www.deezer.com/search/" . $searchSpotify;
  $amazonLink = "https://music.amazon.in/search/" . $searchSpotify;
  $soundcloudLink = "https://soundcloud.com/search?q=" . $searchSpotify;
?>


<div class="release-page">

  <div class="alert-success">
    <i class="fa fa-check-circle"></i> Your release has been successfully submitted.
  </div>
<!-- â³ Skeleton Animation While Loading Hero Section -->
<div id="heroSkeleton" class="hero-skeleton">
  <div class="skeleton-box skel-img"></div>
  <div class="skel-lines">
    <div class="skeleton-box skel-line short"></div>
    <div class="skeleton-box skel-line full"></div>
    <div class="skeleton-box skel-line medium"></div>
    <div class="skeleton-box skel-line full"></div>
    <div class="skeleton-box skel-line medium"></div>
    <div class="skeleton-box skel-line short"></div>
  </div>
</div>
  <!-- ðŸŽ§ Hero Section -->
  <div class="hero" id="heroContent" style="display: none;">
    <a href="../public/uploads/<?php echo $this->Info['cover_img']; ?>" id="openImage">
  <img src="../public/uploads/<?php echo $this->Info['cover_img']; ?>" alt="Cover Image" style="cursor: zoom-in;">
</a>

    <div class="hero-content">
      <div class="status-badge">Submitted : Under Review</div>
      <h1><?php echo $this->Info['title']; ?></h1>
      <div class="meta-grid">
        <div class="meta-label">Artist(s)</div>
        <div class="meta-value"><?php echo $this->Info['releaseArtist']; ?></div>

        <div class="meta-label">Label</div>
        <div class="meta-value"><?php echo $this->Info['label_name']; ?></div>

        <div class="meta-label">Genre</div>
        <div class="meta-value"><?php echo $this->Info['mainGenre']; ?></div>

        <div class="meta-label">Release Date</div>
        <div class="meta-value"><?php echo $this->Info['digitalReleaseDate']; ?></div>

        <div class="meta-label">Tracks</div>
        <div class="meta-value"><?php echo $this->Info['tot_tracks']; ?></div>
      </div>
    </div>
  </div>



<!-- ðŸ§  Smart Links Instruction + Reveal Button -->
<div class="card" style="text-align: center; margin-top: 50px;  font-family: Rubik, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, Noto Sans, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;
">
  <h2>ðŸŽ§ Pre-save & Streaming Links</h2>
  <p style="font-size: 14px; color: #666; margin-bottom: 25px; font-family: Rubik, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, Noto Sans, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;">
    Generate temporary smart links based on your release title & artist to promote across platforms instantly.<br>
    These are not final delivery links â€” those will appear automatically under your track once processed.
  </p>

  <!-- CTA Button -->
  <div id="getLinksButtonWrapper">
    <button onclick="showSmartLinks()" class="btn-primary" style="font-size: 15px; padding: 14px 28px; border-radius: 10px;">
      ðŸš€ Get Smart Links
    </button>
  </div>
</div>

<!-- ðŸŽ¯ Smart Links Box (Initially Hidden) -->
<div id="smartLinksSection" class="card" style="display: none; margin-top: 30px;">
  <h2>ðŸ“¤ Copy Smart Search Links</h2>
  <div style="margin-top: 18px; font-size: 13px; color: #777; background: #fefefe; padding: 12px 16px; border-radius: 8px; border: 1px dashed #ddd;">
    <i class="fa fa-info-circle" style="margin-right: 6px;"></i>
    These links simulate platform searches using your title & artist. Share them to guide users to your release easily.
  </div><br>

  <div class="smart-link-list" style="display: grid; gap: 14px; font-size: 14.5px;">
    <?php
      $smartLinks = [
        ['name' => 'Spotify', 'icon' => 'fab fa-spotify', 'link' => $spotifyLink, 'class' => 'spotify'],
        ['name' => 'Apple Music', 'icon' => 'fab fa-apple', 'link' => $appleLink, 'class' => 'apple'],
        ['name' => 'YouTube', 'icon' => 'fab fa-youtube', 'link' => $youtubeLink, 'class' => 'youtube'],
        ['name' => 'Amazon Music', 'icon' => 'fab fa-amazon', 'link' => $amazonLink, 'class' => 'amazon'],
        ['name' => 'Deezer', 'icon' => 'fab fa-deezer', 'link' => $deezerLink, 'class' => 'deezer'],
        ['name' => 'SoundCloud', 'icon' => 'fab fa-soundcloud', 'link' => $soundcloudLink, 'class' => 'soundcloud']
      ];
      foreach ($smartLinks as $i => $item):
        $id = 'smartLink_' . $i;
    ?>
    <div style="display: flex; align-items: center; justify-content: space-between; background: #f5f7fa; border: 1px solid #ddd; padding: 10px 14px; border-radius: 8px;">
      <div style="display: flex; align-items: center; gap: 10px;">
        <i class="<?php echo $item['icon']; ?>" style="font-size: 18px; color: #333;"></i>
        <span style="font-weight: 600;"><?php echo $item['name']; ?></span>
      </div>
      <div style="flex: 1; margin-left: 20px; overflow-wrap: anywhere;">
        <input id="<?php echo $id; ?>" type="text" value="<?php echo $item['link']; ?>" readonly style="width: 100%; border: none; background: transparent; font-size: 13px; color: #333;">
      </div>
      <button onclick="copyLink('<?php echo $id; ?>')" title="Copy" style="margin-left: 10px; padding: 6px 14px; border-radius: 6px; border: none; background: #8542a2; color: white; font-size: 13px; cursor: pointer;">
        ðŸ”— Copy
      </button>
    </div>
    <?php endforeach; ?>
  </div>

  <p id="copyConfirm" style="margin-top: 12px; font-size: 13px; color: green; display: none;">âœ… Copied!</p>
</div>
<div id="imageModal" class="image-modal">
  <span class="close-btn" onclick="closeImageModal()">&times;</span>
  <img id="modalImage" src="" alt="Zoomed" />
</div>
  
  
  
  
  
  
  
<script>
function copyLink(id) {
  const input = document.getElementById(id);
  navigator.clipboard.writeText(input.value).then(() => {
    const status = document.getElementById('copyConfirm');
    status.style.display = 'block';
    setTimeout(() => status.style.display = 'none', 2500);
  });
}

function showSmartLinks() {
  const btnWrapper = document.getElementById("getLinksButtonWrapper");
  const linksBox = document.getElementById("smartLinksSection");
  btnWrapper.style.display = "none";
  linksBox.style.display = "block";
  linksBox.scrollIntoView({ behavior: 'smooth' });
}
</script>
<script>
  window.addEventListener('DOMContentLoaded', () => {
    // Simulate loading delay
    setTimeout(() => {
      document.getElementById('heroSkeleton').style.display = 'none';
      document.getElementById('heroContent').style.display = 'flex';
    }, 1200); // Adjust delay as needed
  });
  
  
</script>
  <script>
  const openImage = document.getElementById('openImage');
  const imageModal = document.getElementById('imageModal');
  const modalImage = document.getElementById('modalImage');

  openImage.addEventListener('click', function (e) {
    e.preventDefault();
    modalImage.src = this.href;
    imageModal.style.display = 'flex';
  });

  function closeImageModal() {
    imageModal.style.display = 'none';
  }

  // Close when clicking outside image
  imageModal.addEventListener('click', function (e) {
    if (e.target === imageModal) closeImageModal();
  });
    document.addEventListener('keydown', function(e) {
  if (e.key === "Escape" || e.key === "Esc") {
    closeImageModal();
  }
});
</script>
 
