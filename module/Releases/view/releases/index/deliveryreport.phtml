<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Delivery Report</title>
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    .delivery-report {
      font-family: Rubik, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, Noto Sans, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;
      font-weight: 500;
      color: #4a4a4a;
      background-color: #ffffff;
      padding: 32px;
    }
    .delivery-report h1 {
      font-size: 30px;
      font-weight: 600;
      margin-bottom: 0.2em;
    }
    .delivery-report h2 {
      font-size: 20px;
      margin-top: 40px;
      margin-bottom: 16px;
      border-bottom: 1px solid #e5e7eb;
      padding-bottom: 8px;
    }
    .delivery-report p {
      margin-top: 0;
      font-size: 14px;
    }
    .delivery-report table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    .delivery-report th,
    .delivery-report td {
      text-align: left;
      padding: 12px 10px;
      border-bottom: 1px solid #e5e7eb;
      font-size: 14px;
    }
    .delivery-report th {
      background-color: #f3f4f6;
    }
    .delivery-report tr:last-child td {
      border-bottom: none;
    }
    .delivery-report tr:hover td {
      background-color: #f9fafb;
    }
    .delivery-report .copy-btn {
      background-color: #73339e;
      color: white;
      padding: 6px 12px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      white-space: nowrap;
      font-weight: 600;
    }
    .delivery-report .copy-btn:hover {
      background-color: #3730a3;
    }
    .delivery-report .link-input {
      width: 100%;
      padding: 6px;
      font-size: 13px;
      border: 1px solid #ccc;
      border-radius: 4px;
      background-color: #f9fafb;
    }
    .delivery-report .product-row {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .delivery-report small {
      font-weight: 400;
      font-size: 13px;
      color: #777;
    }
    .tooltip {
      width: 300px;
      padding: 15px;
    }
    .css-558cd0 {
      user-select: none;
      display: inline-block;
      fill: currentcolor;
      flex-shrink: 0;
      font-size: 1.5rem;
      color: rgb(101, 108, 130);
      width: 20px;
      height: 20px;
      padding: 0px;
      transition: 300ms cubic-bezier(0.4, 0, 0.2, 1);
    }
    h3 {
      margin: 0px;
      font-family: Rubik, sans-serif;
      font-weight: 700;
      color: #4a4a4a;
      line-height: normal;
      font-size: 2.4rem;
    }
    .tooltip-icon-wrapper {
  position: relative;
  display: inline-block;
  cursor: pointer;
}

.tooltip-icon-wrapper .tooltip-text {
  visibility: hidden;
  width: 260px;
  background-color: #111827;
  color: #fff;
  text-align: left;
  border-radius: 6px;
  padding: 8px 12px;
  font-size: 13px;
  line-height: 1.4;
  position: absolute;
  z-index: 10;
  top: 125%;
  left: 0;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.tooltip-icon-wrapper:hover .tooltip-text {
  visibility: visible;
  opacity: 1;
}
    
    .container-fluid {
    padding-right: 100px;
    padding-left: 100px;
    margin-right: auto;
    margin-left: auto;
}
  </style>
</head>
<body>

<div class="delivery-report">
  <div class="delivery-header">
  <h3>
    Delivery Report
    <span class="tooltip-icon-wrapper">
      <svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-558cd0" viewBox="0 0 24 24">
        <path d="M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"></path>
      </svg>
      <span class="tooltip-text">This section shows delivery details for this release.</span>
    </span>
  </h3>
</div><br><br>

  <style>
  .highlight-box {
    background: linear-gradient(to right, #ebb5f782, #3b89e752);
    border-radius: 12px;
    padding: 24px 28px;
    margin-bottom: 32px;
    font-family: 'Rubik', sans-serif;
    color: #2c3e50;
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.05);
  }

  .highlight-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: 20px 30px;
  }

  .highlight-item {
    display: flex;
    flex-direction: column;
    font-size: 14px;
  }

  .highlight-item strong {
    font-weight: 600;
    color: #1f2937;
    margin-bottom: 4px;
    font-size: 13px;
    text-transform: uppercase;
    letter-spacing: 0.4px;
  }

  .highlight-item span {
    font-weight: 500;
    color: #374151;
    font-size: 15px;
    word-break: break-word;
  }

  .highlight-item small {
    font-weight: 400;
    font-size: 13px;
    color: #6b7280;
    margin-left: 6px;
  }
</style>

<div class="highlight-box">
  <div class="highlight-grid">

    <div class="highlight-item">
      <strong>Track Title</strong>
      <span>
        <?php echo $this->INFO['title']; ?>
        <?php if (!empty($this->INFO['version'])): ?>
          <small>(<?php echo $this->INFO['version']; ?>)</small>
        <?php endif; ?>
      </span>
    </div>

    <div class="highlight-item">
      <strong>Artist</strong>
      <span><?php echo $this->INFO['releaseArtist']; ?></span>
    </div>

    <div class="highlight-item">
      <strong>Sales Start Date</strong>
      <span><?php echo date('d-m-Y', strtotime($this->INFO['digitalReleaseDate'])); ?></span>
    </div>

    <div class="highlight-item">
      <strong>UPC</strong>
      <span><?php echo $this->INFO['upc']; ?></span>
    </div>

    <div class="highlight-item">
      <strong>Label</strong>
      <span><?php echo $this->INFO['label_name']; ?></span>
    </div>

  </div>
</div>


  <h2>Delivery Links & Delivery Date</h2>
  <p>URLs are generated as soon as provided by services. They might not be available until the release date.</p>
  <table>
    <thead>
      <tr>
        <th>Store</th>
        <th>Delivered On</th>
        <th>Delivery Link</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>YouTube</td>
        <td><?php echo date('d-m-Y', strtotime($this->INFO['digitalReleaseDate'])); ?></td>
        <td class="product-row">
          <input class="link-input" type="text" value="<?php echo $this->INFO['youtube_link']; ?>" readonly />
          <button class="copy-btn" onclick="copyLink(this)">Copy</button>
        </td>
      </tr>
      <tr>
        <td>Spotify</td>
        <td><?php echo date('d-m-Y', strtotime($this->INFO['digitalReleaseDate'])); ?></td>
        <td class="product-row">
          <input class="link-input" type="text" value="<?php echo $this->INFO['spotify_link']; ?>" readonly />
          <button class="copy-btn" onclick="copyLink(this)">Copy</button>
        </td>
      </tr>
      <tr>
        <td>Apple Music</td>
        <td><?php echo date('d-m-Y', strtotime($this->INFO['digitalReleaseDate'])); ?></td>
        <td class="product-row">
          <?php if (!empty($this->INFO['apple_link'])): ?>
            <input class="link-input" type="text" value="<?php echo $this->INFO['apple_link']; ?>" readonly />
            <button class="copy-btn" onclick="copyLink(this)">Copy</button>
          <?php else: ?>
            <span style="color: #888;">Not available</span>
          <?php endif; ?>
        </td>
      </tr>
    </tbody>
  </table>

 <h2>Delivery Date</h2>
<p>Store statuses and links are available in Prime Backstage for observations.</p>
<table>
<thead>
  <tr>
    <th width="35%">Store</th>
    <th>Delivered On</th>
  </tr>
</thead>
<tbody>
<?php
$deliver_date = date("d-m-Y", strtotime($this->INFO['digitalReleaseDate']));
$iconBase = $this->basePath() . '/public/img/store2/';

$stores = [
  '1. Amazon Prime Music'        => 'amazon.png',
  '2. Apple Music'               => 'apple.png',
  '3. Hungama'                   => 'hungama.avif',
  '4. iTunes'                    => 'iTunes.png',
  '5. JioSaavn'                  => 'jiosaavn.png',
  '6. Resso / TikTok Music'      => 'Resso-tiktok.jpg',
  '7. SoundCloud'                => 'Soundcloud.png',
  '8. Spotify'                   => 'spotify.png',
  '9. UMA (Vkontakte)'           => 'UMA (Vkontakte).png',
  '10. Ultimate Music'           => 'Ultimate Music.jpg',
  '11. Wynk'                     => 'Wynk Music.png',
  '12. Facebook / Instagram'     => 'Facebook_instagram.png',
  '13. Douyin'                   => 'Douyin.png',
  '14. Snapchat'                 => 'snapchat-logo.svg',
  '15. TikTok'                   => 'tiktok.png',
  '16. YouTube Audio Tier'       => 'YouTube Audio Tier.png',
  '17. YouTube Official Content' => 'YouTube Official Content.png',
  '18. YouTube Shorts'           => 'Youtube_shorts_icon.png'
];

foreach ($stores as $label => $icon) {
    echo '<tr>
            <td style="display: flex; align-items: center;">
              <img src="' . $iconBase . $icon . '" style="width:25px; height:25px; margin-right:12px; object-fit: contain;">
              <span>' . $label . '</span>
            </td>
            <td>' . $deliver_date . '</td>
          </tr>';
}

// âœ… YouTube UGC (Content ID)
if (isset($this->has_ugc) && $this->has_ugc) {
    echo '<tr>
            <td style="display: flex; align-items: center;">
              <img src="' . $iconBase . 'youtube ugc.png" style="width:25px; height:25px; margin-right:12px; object-fit: contain;">
              <strong>19. YouTube UGC (Content ID)</strong>
            </td>
            <td>' . $deliver_date . '</td>
          </tr>';
}
?>
</tbody>
</table>
</div>

<script>
  function copyLink(button) {
    const input = button.previousElementSibling;
    input.select();
    input.setSelectionRange(0, 99999);
    document.execCommand("copy");
    button.innerText = "Copied!";
    setTimeout(() => {
      button.innerText = "Copy";
    }, 2000);
  }
</script>

</body>
</html>
